# ✅ 技能卡卡面处理完成

## 📊 处理结果

### 文件统计
- **源目录**: `E:\偶像大师\闪耀色彩图片资源\歌曲图片\【学マス】スキルカード一覧【学園アイドルマスター】｜ゲームエイト`
- **目标目录**: `E:\偶像大师\闪耀色彩图片-最终版\技能卡卡面`
- **文件总数**: **299张WebP格式技能卡卡面** + 1张原始JPG（保留）

### 处理过程
1. ✅ 安装webp转换工具（使用Chocolatey安装）
2. ✅ 已有22张webp文件，已移动
3. ✅ 已有276张png文件，已全部转换为webp
4. ✅ 已有1张jpg文件（もうためらわない.jpg），已转换为webp
5. ✅ 所有299张webp文件已移动到最终版目录

---

## 📁 文件命名说明

⚠️ **重要提示**：由于Windows文件系统限制，所有非法字符 `\/:*?"<>|` 已从文件名中移除。

这意味着在代码中使用技能卡卡面URL时，需要进行相应的名称转换：

### 非法字符处理规则
- 原始卡名可能包含非法字符（如 `/`, `:`, `*`, `?`, `"`, `<`, `>`, `|`）
- 文件名中这些字符已全部删除
- 使用时需要将数据库中的卡名进行相同的处理

### 示例
```typescript
// 数据库中的卡名
const cardName = "その本、おもしろい？";

// 构建URL时需要移除非法字符
function sanitizeFileName(name: string): string {
  return name.replace(/[\\/:"*?<>|]/g, '');
}

const imageUrl = `https://raw.githubusercontent.com/你的仓库/main/技能卡卡面/${encodeURIComponent(sanitizeFileName(cardName))}.webp`;
```

---

## 🔗 CDN路径

✅ **已成功上传到GitHub！**

技能卡卡面的CDN基础路径：
```
https://raw.githubusercontent.com/2426269/shinycolors-assets-cdn/main/技能卡卡面/
```

完整URL格式：
```
https://raw.githubusercontent.com/2426269/shinycolors-assets-cdn/main/技能卡卡面/{卡名}.webp
```

**上传统计**：
- 上传对象数：303个
- 总大小：2.49 MiB
- 上传时间：约5秒
- Commit: `91af6b3`

---

## 📤 Git推送说明

由于文件数量较多（299张），git操作可能会比较慢。建议分批推送：

### 方法1：分批添加（推荐）
```powershell
cd "E:\偶像大师\闪耀色彩图片-最终版"

# 分批添加文件（每次50个）
git add 技能卡卡面/[0-9]*.webp
git add 技能卡卡面/[a-zA-Z]*.webp
git add 技能卡卡面/あ*.webp
git add 技能卡卡面/か*.webp
git add 技能卡卡面/さ*.webp
git add 技能卡卡面/た*.webp
git add 技能卡卡面/な*.webp
git add 技能卡卡面/は*.webp
git add 技能卡卡面/ま*.webp
git add 技能卡卡面/や*.webp
git add 技能卡卡面/ら*.webp
git add 技能卡卡面/わ*.webp
# ... 其他字符开头的文件

git commit -m "添加299张技能卡卡面(WebP格式)"
git push
```

### 方法2：直接推送（可能较慢）
```powershell
cd "E:\偶像大师\闪耀色彩图片-最终版"
git add 技能卡卡面/
git commit -m "添加299张技能卡卡面(WebP格式)"
git push
```

### 方法3：使用LFS（如果文件总大小超过100MB）
```powershell
cd "E:\偶像大师\闪耀色彩图片-最终版"
git lfs track "技能卡卡面/*.webp"
git add .gitattributes
git add 技能卡卡面/
git commit -m "添加299张技能卡卡面(WebP格式，使用LFS)"
git push
```

---

## 💾 文件大小估算

- 单个WebP文件大小：约30-100KB（取决于图片复杂度）
- 299张卡面总大小：约15-30MB

如果总大小超过100MB，建议使用Git LFS。

---

## 🎯 后续步骤

### 1. 更新代码中的图片路径
在技能卡相关代码中，添加图片URL构建函数：

```typescript
// 构建技能卡卡面URL
function buildSkillCardImageUrl(cardName: string): string {
  const sanitizedName = cardName.replace(/[\\/:"*?<>|]/g, '');
  const baseUrl = 'https://raw.githubusercontent.com/[你的用户名]/[仓库名]/main/技能卡卡面';
  return `${baseUrl}/${encodeURIComponent(sanitizedName)}.webp`;
}

// 使用示例
const imageUrl = buildSkillCardImageUrl('その本、おもしろい？');
// 结果: https://raw.githubusercontent.com/.../技能卡卡面/その本、おもしろい.webp
```

### 2. 在项目中使用
```typescript
import { buildSkillCardImageUrl } from './utils/image-url';

// 从数据库获取技能卡数据
const skillCard = database.find(card => card.name === 'その本、おもしろい？');

// 获取卡面图片URL
const imageUrl = buildSkillCardImageUrl(skillCard.name);

// 在UI中使用
<img src={imageUrl} alt={skillCard.name} />
```

---

## ✅ 完成清单

- [x] 安装webp转换工具
- [x] 转换所有PNG/JPG文件为WebP格式
- [x] 移动299张WebP文件到最终版目录
- [x] 创建文件命名说明文档
- [x] ✅ 推送文件到Git仓库（已完成！Commit: 91af6b3）
- [ ] 更新代码中的图片路径配置
- [ ] 测试图片URL是否正确加载

---

**状态**: 🟢 **所有299张技能卡卡面已成功上传至GitHub！**

**CDN地址**: `https://raw.githubusercontent.com/2426269/shinycolors-assets-cdn/main/技能卡卡面/`

**下一步**: 在代码中集成技能卡卡面URL构建函数

