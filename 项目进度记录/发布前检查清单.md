# 发布前检查清单

## 📋 上传到Chub/类脑社区前必做

### ⚠️ 重要配置修改

#### 1. **羽石初始值修改为3000**

**当前状态**: 测试用无限羽石（999999999）  
**发布状态**: 正式初始值（3000）

**修改位置**: `src/偶像大师闪耀色彩/app.vue`

**Line 1254**:
```typescript
// 当前（测试）:
featherStones: 999999999, // 测试用无限羽石（发布时改回3000）

// 修改为（发布）:
featherStones: 3000, // 初始羽石（1次十连）
```

**修改步骤**:
```bash
# 1. 修改源码
code src/偶像大师闪耀色彩/app.vue
# 找到 Line 1254，将 999999999 改为 3000

# 2. 重新构建
npm run build

# 3. 验证
# 清除浏览器localStorage后刷新，应该显示3000羽石
```

---

### 🔍 代码检查项

#### 2. **移除开发调试工具**

**检查位置**: `src/偶像大师闪耀色彩-gacha/app.vue`

**Line 45-49**:
```typescript
// 确保这段代码只在开发模式显示
<div class="dev-tools" v-if="isDev">
  <button @click="devAddGems(10000)">+10000羽石</button>
  <button @click="devSetPity(89, 199)">设置保底(SSR 89, UR 199)</button>
  <button @click="devReset">重置数据</button>
</div>
```

**验证**: 
- 确保 `isDev` 默认为 `false`
- 用户不应该在控制台看到调试按钮

**当前设置** (Line 159):
```typescript
const isDev = ref(false); // ✅ 正确，发布时应该是false
```

**如需启用开发模式**:
```javascript
// 在浏览器控制台执行
window.GACHA_DEV = true;
location.reload();
```

---

#### 3. **移除Console日志（可选）**

**检查文件**:
- `src/偶像大师闪耀色彩/app.vue`
- `src/偶像大师闪耀色彩-gacha/app.vue`
- `src/偶像大师闪耀色彩-gacha/gacha-core.ts`

**搜索关键词**:
```bash
# 在项目根目录执行
grep -r "console.log" src/偶像大师闪耀色彩/
grep -r "console.warn" src/偶像大师闪耀色彩/
```

**建议**: 保留必要的错误日志（console.error），移除调试日志（console.log）

---

### 📦 构建与测试

#### 4. **完整构建测试**

```bash
# 清理旧构建
rm -rf dist/偶像大师闪耀色彩

# 重新构建
npm run build

# 检查构建产物
ls -lh dist/偶像大师闪耀色彩/
# 应该看到: index.html (约180KB)
```

#### 5. **功能完整性测试**

**测试清单**:
- [ ] 音乐播放器：播放、暂停、切歌、歌词显示
- [ ] 抽卡系统：单抽、十连、结果显示、羽石扣除
- [ ] 资源显示：羽石、星尘、等级正确显示
- [ ] 设置面板：打开、关闭、切换全屏模式
- [ ] 数据持久化：刷新后羽石等数据不丢失
- [ ] 响应式布局：全屏/窗口模式正常显示

#### 6. **浏览器兼容性测试**

**推荐测试浏览器**:
- [ ] Chrome/Edge (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (如果在Mac上)

**测试重点**:
- localStorage 功能
- CSS渐变和动画
- FontAwesome图标显示

---

### 📝 文档与资源

#### 7. **README/使用说明**

**检查文件**: (如果创建了的话)
- README.md
- CHANGELOG.md
- 使用说明.txt

**应包含内容**:
- 项目简介
- 安装方法（如何加载到SillyTavern）
- 功能列表
- 已知问题
- 更新日志

#### 8. **资源文件检查**

**GitHub Release检查**:
- [ ] 所有歌曲音频已上传 (tag: `歌曲`)
- [ ] 所有专辑封面已上传 (tag: `歌曲图片`)
- [ ] 所有偶像立绘已上传 (tag: `角色卡立绘`)
- [ ] 游戏图标已上传 (tag: `游戏图标`)，包含 `Feather_Jewel.png`
- [ ] 卡池图片已上传 (tag: `卡池图片`)，包含 `羽石.png`

**验证方法**:
```bash
# 访问这些URL，确保200状态码
curl -I https://github.com/2426269/shinycolors-assets/releases/download/歌曲/Spread.the.Wings.mp3
curl -I https://github.com/2426269/shinycolors-assets/releases/download/游戏图标/Feather_Jewel.png
```

---

### 🔒 安全与隐私

#### 9. **敏感信息检查**

**搜索关键词**:
```bash
# 不应该包含的内容
grep -r "localhost" src/
grep -r "127.0.0.1" src/
grep -r "password" src/
grep -r "secret" src/
grep -r "token" src/
```

**应该排除的文件** (`.gitignore`):
- `node_modules/`
- `.env`
- `.env.local`
- `*.log`

#### 10. **许可证与版权**

**添加文件**: `LICENSE`

**推荐许可证**:
- MIT License (最宽松)
- CC BY-NC-SA 4.0 (非商业、署名、相同方式共享)

**版权声明**:
```
《偶像大师 闪耀色彩》版权归BANDAI NAMCO Entertainment Inc.所有
本项目为同人作品，仅供学习交流使用，不得用于商业用途
```

---

### 📤 发布流程

#### 11. **上传到Chub.ai**

**准备文件**:
1. `dist/偶像大师闪耀色彩/index.html` (主文件)
2. 角色卡PNG (包含元数据)
3. 预览图 (可选)

**Chub发布清单**:
- [ ] 标题：《偶像大师闪耀色彩 - 制作人养成系统》
- [ ] 标签：偶像大师、音乐、抽卡、养成、中文
- [ ] 分类：Game/RPG
- [ ] 描述：包含功能列表、使用方法、更新日志
- [ ] NSFW：否
- [ ] 公开/私有：公开

#### 12. **上传到类脑社区**

**准备文件**:
- 同上

**类脑发布清单**:
- [ ] 分类：游戏卡/偶像养成
- [ ] 适配模型：通用（GPT-4, Claude等）
- [ ] 中文标签
- [ ] 使用说明

---

### ✅ 最终检查清单

**发布前30分钟**:
- [ ] ✅ 羽石改回3000
- [ ] ✅ `npm run build` 成功
- [ ] ✅ 清除localStorage测试初始状态
- [ ] ✅ 单抽测试（羽石 3000 → 2700）
- [ ] ✅ 十连测试（羽石 2700 → -300 = 提示不足）
- [ ] ✅ 开发工具不可见
- [ ] ✅ 所有GitHub资源链接正常
- [ ] ✅ README完整
- [ ] ✅ LICENSE文件存在
- [ ] ✅ 无敏感信息泄露

**发布后**:
- [ ] 在Chub/类脑测试加载
- [ ] 征集用户反馈
- [ ] 记录第一版发布时间到 `CHANGELOG.md`

---

## 🐛 常见发布问题

### 问题1：图片无法显示
**原因**: GitHub Release链接错误或未公开  
**解决**: 
1. 确认Release已发布（非草稿）
2. 检查文件名大小写
3. 用浏览器直接访问URL验证

### 问题2：localStorage数据冲突
**原因**: 测试时的无限羽石残留  
**解决**: 发布说明中提示用户首次使用前清空localStorage
```javascript
// 在浏览器控制台执行
localStorage.clear();
location.reload();
```

### 问题3：SillyTavern加载失败
**原因**: 酒馆助手版本过旧  
**解决**: 发布说明中注明最低版本要求
```
要求：
- SillyTavern 1.11.0+
- Quick Replies 扩展已启用
```

---

## 📊 发布后数据收集

### 用户反馈表单（可选）

**收集信息**:
- [ ] 使用的SillyTavern版本
- [ ] 使用的LLM模型
- [ ] 遇到的问题
- [ ] 功能建议
- [ ] 满意度评分 (1-5星)

**数据用途**:
- 优先修复高频问题
- 指导Phase 2功能开发
- 统计最受欢迎的功能

---

**文档版本**: 1.0  
**创建时间**: 2025-10-29  
**维护者**: AI Assistant  

**下次更新时机**: 准备发布正式版1.0时


