# æŠ€èƒ½å¡è¯æ¡å¼æ ¼å¼è¯´æ˜

## ğŸ“‹ æ¸¸æˆåŸç‰ˆæ ¼å¼åˆ†æ

### å®ä¾‹1ï¼šã‚ªãƒˆãƒ¡ã‚´ã‚³ãƒ­+ï¼ˆä¹™å¥³ä¹‹å¿ƒ+ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚ªãƒˆãƒ¡ã‚´ã‚³ãƒ­+           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿            â”‚  â† å±æ€§æ ‡ç­¾
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ ã‚„ã‚‹æ°—æ¶ˆè²»2           â”‚  â† æ¶ˆè€—æ•ˆæœ
â”‚ ğŸ‘ å¥½å°è±¡+5              â”‚  â† åŸºç¡€æ•ˆæœ
â”‚ ğŸ´ ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨æ•°+1  â”‚  â† åŸºç¡€æ•ˆæœ
â”‚ ğŸ‘ å¥½å°è±¡10ä»¥ä¸Š â†’ +2     â”‚  â† æ¡ä»¶æ•ˆæœ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é‡è¤‡ä¸å¯                â”‚  â† é™åˆ¶ä¿¡æ¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®ä¾‹2ï¼šã»ãã‚Œã‚‹ã²ã¨ã¨ãï¼ˆèˆ’ç¼“æ—¶åˆ»ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã»ãã‚Œã‚‹ã²ã¨ã¨ã         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒŸ å¥½èª¿æ¶ˆè²»1ã‚¿ãƒ¼ãƒ³       â”‚  â† æ¶ˆè€—æ•ˆæœ
â”‚ â° 3ã‚¿ãƒ¼ãƒ³ç›®ä»¥é™ã€ä½¿ç”¨å¯ â”‚  â† ä½¿ç”¨æ¡ä»¶
â”‚ ğŸ¯ é›†ä¸­å¢—åŠ é‡+50%(3T)    â”‚  â† ç‰¹æ®Šæ•ˆæœ
â”‚ ğŸ¯ å¥½èª¿â†’æ¬¡Té›†ä¸­+4        â”‚  â† æ¡ä»¶æ•ˆæœ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é‡è¤‡ä¸å¯ ãƒ¬ãƒƒã‚¹ãƒ³ä¸­1å›   â”‚  â† é™åˆ¶ä¿¡æ¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ–°æ ¼å¼è®¾è®¡

### TypeScript ç±»å‹å®šä¹‰

```typescript
// å•ä¸ªæ•ˆæœè¯æ¡
interface EffectEntry {
  type: 'æ•°å€¼' | 'å…ƒæ°”' | 'å¹²åŠ²' | 'å¥½å°è±¡' | 'é›†ä¸­' | 'å…¨åŠ›å€¼' | 
        'å¥½è°ƒ' | 'çŠ¶æ€ç»ä½³' | 'æ¶ˆè´¹ä½“åŠ›å‡å°‘' | 'æ¶ˆè´¹ä½“åŠ›å‰Šå‡' |
        'æŠ€èƒ½å¡ä½¿ç”¨æ•°è¿½åŠ ' | 'ä½“åŠ›å›å¤' | 'ä½“åŠ›æ¶ˆè€—' | 
        'åˆ†æ•°å€ç‡' | 'æŠ½å–æŠ€èƒ½å¡' | 'ç‰¹æ®Šæ•ˆæœ';
  value: number | string;
  isConsumption?: boolean;  // æ˜¯å¦ä¸ºæ¶ˆè€—å‹
  duration?: number;         // æŒç»­å›åˆæ•°
  icon?: string;             // å›¾æ ‡ä»£ç 
}

// æ¡ä»¶æ•ˆæœ
interface ConditionalEffectEntry {
  condition: string;  // å¦‚ï¼š"å¥½å°è±¡10ä»¥ä¸Šæ—¶"
  effect: EffectEntry;
}

// é™åˆ¶ä¿¡æ¯
interface CardRestrictions {
  repeatable: boolean;      // æ˜¯å¦å¯é‡å¤è·å¾—
  perLessonLimit: number | null;  // æ¼”å‡ºä¸­é™åˆ¶ï¼ˆ1æˆ–nullï¼‰
  turnRestriction?: string; // å›åˆé™åˆ¶ï¼ˆå¦‚ï¼š"3å›åˆç›®ä»¥åå¯ä½¿ç”¨"ï¼‰
}

// å®Œæ•´æŠ€èƒ½å¡ï¼ˆæ–°æ ¼å¼å­—æ®µï¼‰
interface SkillCard {
  // ... åŸºç¡€å­—æ®µ ...
  
  // æ–°å¢è¯æ¡å¼æ ¼å¼
  effectEntries?: EffectEntry[];  // å¼ºåŒ–å‰æ•ˆæœè¯æ¡
  effectEntriesEnhanced?: EffectEntry[];  // å¼ºåŒ–åæ•ˆæœè¯æ¡
  conditionalEffects?: ConditionalEffectEntry[];  // å¼ºåŒ–å‰æ¡ä»¶æ•ˆæœ
  conditionalEffectsEnhanced?: ConditionalEffectEntry[];  // å¼ºåŒ–åæ¡ä»¶æ•ˆæœ
  restrictions?: CardRestrictions;  // é™åˆ¶ä¿¡æ¯
  
  // ä¿ç•™æ—§æ ¼å¼ï¼ˆå…¼å®¹ï¼‰
  effect_before: string;
  effect_after: string;
}
```

---

## ğŸ“ JSON è¾“å‡ºç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç†æ€§è®¡åˆ’SSRå¡ - é—ªé—ªçº¸ç‰‡ï¼ˆAIç”Ÿæˆï¼‰

```json
{
  "nameJP": "ã‚­ãƒ©ã‚­ãƒ©ãºãƒ¼ãƒ‘ãƒ¼",
  "nameCN": "é—ªé—ªçº¸ç‰‡",
  "rarity": "SSR",
  "plan": "ç†æ€§",
  "cardType": "A",
  "cost": "3",
  
  "effectEntries": [
    {
      "type": "å¹²åŠ²",
      "value": -3,
      "isConsumption": true,
      "icon": "motivation"
    },
    {
      "type": "æ•°å€¼",
      "value": "+å…ƒæ°”çš„110%",
      "icon": "score"
    },
    {
      "type": "æŠ½å–æŠ€èƒ½å¡",
      "value": 1,
      "icon": "draw"
    }
  ],
  
  "effectEntriesEnhanced": [
    {
      "type": "å¹²åŠ²",
      "value": -3,
      "isConsumption": true,
      "icon": "motivation"
    },
    {
      "type": "æ•°å€¼",
      "value": "+å…ƒæ°”çš„150%",
      "icon": "score"
    },
    {
      "type": "æŠ½å–æŠ€èƒ½å¡",
      "value": 2,
      "icon": "draw"
    }
  ],
  
  "restrictions": {
    "repeatable": false,
    "perLessonLimit": null
  },
  
  "flavor": "åœ¨è®­ç»ƒä¸­é—ªçƒçš„åˆ›æ„ï¼ŒåŒ–ä¸ºèˆå°ä¸Šçš„å…‰èŠ’ã€‚"
}
```

---

### ç¤ºä¾‹2ï¼šæ„Ÿæ€§è®¡åˆ’SSRå¡ - èˆ’ç¼“æ—¶åˆ»ï¼ˆæ¸¸æˆåŸç‰ˆï¼‰

```json
{
  "nameJP": "ã»ãã‚Œã‚‹ã²ã¨ã¨ã",
  "nameCN": "èˆ’ç¼“æ—¶åˆ»",
  "rarity": "SSR",
  "plan": "æ„Ÿæ€§",
  "cardType": "M",
  "cost": "0",
  
  "effectEntries": [
    {
      "type": "å¥½è°ƒ",
      "value": -1,
      "isConsumption": true,
      "duration": 1,
      "icon": "good_condition"
    },
    {
      "type": "ç‰¹æ®Šæ•ˆæœ",
      "value": "é›†ä¸­å¢åŠ é‡+50%",
      "duration": 3,
      "icon": "buff"
    }
  ],
  
  "conditionalEffects": [
    {
      "condition": "å¥½è°ƒçŠ¶æ€æ—¶",
      "effect": {
        "type": "é›†ä¸­",
        "value": 4,
        "icon": "concentration"
      }
    }
  ],
  
  "effectEntriesEnhanced": [
    {
      "type": "å¥½è°ƒ",
      "value": -1,
      "isConsumption": true,
      "duration": 1,
      "icon": "good_condition"
    },
    {
      "type": "ç‰¹æ®Šæ•ˆæœ",
      "value": "é›†ä¸­å¢åŠ é‡+75%",
      "duration": 3,
      "icon": "buff"
    }
  ],
  
  "conditionalEffectsEnhanced": [
    {
      "condition": "å¥½è°ƒçŠ¶æ€æ—¶",
      "effect": {
        "type": "é›†ä¸­",
        "value": 6,
        "icon": "concentration"
      }
    }
  ],
  
  "restrictions": {
    "repeatable": false,
    "perLessonLimit": 1,
    "turnRestriction": "3å›åˆç›®ä»¥åå¯ä½¿ç”¨"
  }
}
```

---

## ğŸ¨ å‰ç«¯æ˜¾ç¤ºæ•ˆæœ

### æ¸²æŸ“é€»è¾‘ä¼ªä»£ç 

```typescript
function renderSkillCard(card: SkillCard, isEnhanced: boolean) {
  const effects = isEnhanced ? card.effectEntriesEnhanced : card.effectEntries;
  const conditionals = isEnhanced ? card.conditionalEffectsEnhanced : card.conditionalEffects;
  
  return `
    <div class="skill-card">
      <!-- å¡ç‰‡åç§° -->
      <div class="card-name">${card.nameCN}</div>
      
      <!-- å±æ€§æ ‡ç­¾ -->
      <div class="card-plan">${card.plan}ã®ã¿</div>
      
      <!-- æ•ˆæœè¯æ¡åˆ—è¡¨ -->
      <div class="effect-list">
        ${effects.map(e => `
          <div class="effect-entry">
            <icon type="${e.icon}" />
            <span class="${e.isConsumption ? 'consumption' : ''}">
              ${formatEffect(e)}
            </span>
          </div>
        `).join('')}
        
        <!-- æ¡ä»¶æ•ˆæœ -->
        ${conditionals?.map(c => `
          <div class="conditional-effect">
            <span class="condition">${c.condition}</span>
            <icon type="${c.effect.icon}" />
            <span>${formatEffect(c.effect)}</span>
          </div>
        `).join('')}
      </div>
      
      <!-- é™åˆ¶ä¿¡æ¯ -->
      <div class="restrictions">
        ${!card.restrictions.repeatable ? 'é‡è¤‡ä¸å¯' : 'ä½¿ç”¨å¯èƒ½'}
        ${card.restrictions.perLessonLimit ? ' ãƒ¬ãƒƒã‚¹ãƒ³ä¸­1å›' : ''}
      </div>
    </div>
  `;
}

function formatEffect(effect: EffectEntry): string {
  const { type, value, duration, isConsumption } = effect;
  
  let text = type;
  
  if (isConsumption) {
    text += 'æ¶ˆè²»' + Math.abs(value as number);
  } else {
    text += '+' + value;
  }
  
  if (duration) {
    text += ' ' + duration + 'ã‚¿ãƒ¼ãƒ³';
  }
  
  return text;
}
```

---

## âœ… ä¼˜åŠ¿å¯¹æ¯”

### æ—§æ ¼å¼ï¼ˆçº¯æ–‡æœ¬ï¼‰

```json
{
  "effect": "å¹²åŠ²æ¶ˆè€—3 å…ƒæ°”çš„110%æ•°å€¼å˜ä¸ºæ‰“åˆ†ä¸Šå‡ ä¸‹ä¸ªå›åˆæŠ½å–æŠ€èƒ½å¡ â€»ä¸å¯é‡å¤"
}
```

**é—®é¢˜**ï¼š
- âŒ æ‰€æœ‰æ•ˆæœæŒ¤åœ¨ä¸€è¡Œ
- âŒ æ— æ³•æ·»åŠ å›¾æ ‡
- âŒ éš¾ä»¥è§£æå’Œæœ¬åœ°åŒ–
- âŒ ä¸æ¸¸æˆåŸç‰ˆæ ¼å¼ä¸ç¬¦

---

### æ–°æ ¼å¼ï¼ˆè¯æ¡å¼ï¼‰

```json
{
  "effectEntries": [
    { "type": "å¹²åŠ²", "value": -3, "isConsumption": true },
    { "type": "æ•°å€¼", "value": "+å…ƒæ°”çš„110%" },
    { "type": "æŠ½å–æŠ€èƒ½å¡", "value": 1 }
  ],
  "restrictions": {
    "repeatable": false,
    "perLessonLimit": null
  }
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¸…æ™°çš„è¯æ¡ç»“æ„
- âœ… æ”¯æŒå›¾æ ‡æ˜¾ç¤º
- âœ… æ˜“äºè§£æå’Œæ‰©å±•
- âœ… å®Œå…¨åŒ¹é…æ¸¸æˆåŸç‰ˆæ ¼å¼
- âœ… æ”¯æŒæ¡ä»¶æ•ˆæœ
- âœ… åŒºåˆ†æ¶ˆè€—å‹å’Œå¢ç›Šå‹æ•ˆæœ

---

## ğŸ”„ è¿ç§»è®¡åˆ’

### é˜¶æ®µ1ï¼šç±»å‹å®šä¹‰ âœ…
- [x] æ·»åŠ  `EffectEntry` æ¥å£
- [x] æ·»åŠ  `ConditionalEffectEntry` æ¥å£
- [x] æ·»åŠ  `CardRestrictions` æ¥å£
- [x] æ‰©å±• `SkillCard` æ¥å£

### é˜¶æ®µ2ï¼šAIç”Ÿæˆæ›´æ–°
- [ ] æ›´æ–°æç¤ºè¯åŒº - æ–°çš„JSONè¾“å‡ºæ ¼å¼
- [ ] æ›´æ–°AIç”ŸæˆåŠ©æ‰‹ - æ–°çš„SchemaéªŒè¯
- [ ] æ›´æ–°ç¤ºä¾‹å¡æŠ½å– - è¯æ¡å¼æ ¼å¼åŒ–

### é˜¶æ®µ3ï¼šå‰ç«¯æ˜¾ç¤º
- [ ] åˆ›å»ºæŠ€èƒ½å¡è¯æ¡ç»„ä»¶
- [ ] æ·»åŠ æ•ˆæœå›¾æ ‡èµ„æº
- [ ] æ›´æ–°æŠ€èƒ½å¡æ˜¾ç¤ºUI

### é˜¶æ®µ4ï¼šå‘åå…¼å®¹
- [ ] åˆ›å»ºæ ¼å¼è½¬æ¢å·¥å…·ï¼ˆæ—§â†’æ–°ï¼‰
- [ ] åˆ›å»ºæ ¼å¼è½¬æ¢å·¥å…·ï¼ˆæ–°â†’æ—§ï¼‰
- [ ] æ›´æ–°ç°æœ‰æŠ€èƒ½å¡åº“

---

## ğŸ“Š æ•ˆæœç±»å‹å®Œæ•´æ¸…å•

| ç±»å‹ | æ—¥æ–‡ | å›¾æ ‡ | è¯´æ˜ |
|------|------|------|------|
| æ•°å€¼ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ğŸ¯ | ç›´æ¥è·å¾—åˆ†æ•° |
| å…ƒæ°” | å…ƒæ°— | âš¡ | å…ƒæ°”èµ„æº |
| å¹²åŠ² | ã‚„ã‚‹æ°— | ğŸ’ª | å¹²åŠ²èµ„æº |
| å¥½å°è±¡ | å¥½å°è±¡ | ğŸ‘ | å¥½å°è±¡èµ„æº |
| é›†ä¸­ | é›†ä¸­ | ğŸ¯ | é›†ä¸­èµ„æº |
| å…¨åŠ›å€¼ | å…¨åŠ›å€¤ | ğŸ’¥ | å…¨åŠ›å€¼èµ„æº |
| å¥½è°ƒ | å¥½èª¿ | ğŸŒŸ | å¥½è°ƒçŠ¶æ€ï¼ˆéœ€å›åˆæ•°ï¼‰ |
| çŠ¶æ€ç»ä½³ | çµ¶å¥½èª¿ | â­ | ç»ä½³çŠ¶æ€ï¼ˆéœ€å›åˆæ•°ï¼‰ |
| æ¶ˆè´¹ä½“åŠ›å‡å°‘ | æ¶ˆè²»ä½“åŠ›æ¸›å°‘ | ğŸ›¡ï¸ | ä½“åŠ›æ¶ˆè€—å‡å°‘ï¼ˆéœ€å›åˆæ•°ï¼‰ |
| æ¶ˆè´¹ä½“åŠ›å‰Šå‡ | æ¶ˆè²»ä½“åŠ›å‰Šæ¸› | ğŸ›¡ï¸ | ä½“åŠ›æ¶ˆè€—å‰Šå‡ |
| æŠ€èƒ½å¡ä½¿ç”¨æ•°è¿½åŠ  | ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨æ•°è¿½åŠ  | ğŸ´ | å¢åŠ æ‰‹ç‰Œæ•° |
| ä½“åŠ›å›å¤ | ä½“åŠ›å›å¾© | â¤ï¸ | æ¢å¤ä½“åŠ› |
| ä½“åŠ›æ¶ˆè€— | ä½“åŠ›æ¶ˆè²» | ğŸ’” | æ¶ˆè€—ä½“åŠ› |
| åˆ†æ•°å€ç‡ | ã‚¹ã‚³ã‚¢å€ç‡ | ğŸ“ˆ | åˆ†æ•°ä¹˜ç®— |
| æŠ½å–æŠ€èƒ½å¡ | ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ç²å¾— | ğŸ´ | ä»ç‰Œç»„æŠ½å¡ |
| ç‰¹æ®Šæ•ˆæœ | ç‰¹æ®ŠåŠ¹æœ | âœ¨ | å…¶ä»–ç‰¹æ®Šæœºåˆ¶ |

---

## ğŸ¯ æ€»ç»“

æ–°çš„è¯æ¡å¼æ ¼å¼ï¼š
1. âœ… **å®Œå…¨åŒ¹é…æ¸¸æˆåŸç‰ˆæ˜¾ç¤º**
2. âœ… **æ”¯æŒå›¾æ ‡å’Œè§†è§‰æ•ˆæœ**
3. âœ… **ç»“æ„æ¸…æ™°ï¼Œæ˜“äºè§£æ**
4. âœ… **æ”¯æŒæ¡ä»¶æ•ˆæœå’Œå¤æ‚æœºåˆ¶**
5. âœ… **ä¿æŒå‘åå…¼å®¹**

**ä¸‹ä¸€æ­¥**ï¼šæ›´æ–°æç¤ºè¯åŒºï¼Œè®©AIæŒ‰ç…§æ–°æ ¼å¼è¾“å‡ºæŠ€èƒ½å¡ï¼


