# 🎭 觉醒模式系统使用说明

## ✨ 功能概述

偶像图鉴的卡片详情页现在支持**觉醒模式切换**功能，可以查看觉醒后的卡面和技能卡信息！

---

## 🎮 使用方法

### 1. 打开偶像图鉴

在 SillyTavern 中加载项目后，进入**偶像图鉴**界面。

### 2. 查看卡片详情

点击任意**已拥有的卡片**，打开详情弹窗。

### 3. 切换觉醒模式

在详情弹窗的**左侧卡面图片右上角**，有一个**金色翻转按钮** 🔄：

- **点击按钮**：切换到觉醒模式
- **再次点击**：切换回未觉醒模式

#### 觉醒按钮效果：

- 未觉醒：白色背景，紫色图标
- 已觉醒：**金色渐变背景**，带金色脉冲动画
- 悬停时：按钮放大，图标旋转 180°

---

## 📋 界面显示

### 未觉醒模式（默认）

**左侧**：未觉醒卡面  
**右侧**：角色属性信息
- 属性类型（理性/感性/非凡）
- 体力值
- 推荐流派
- 三维属性柱状图（Vocal/Dance/Visual）

### 觉醒模式

**左侧**：觉醒后卡面（带 + 号的版本）  
**右侧**：技能卡信息

#### 情况 A：技能卡未生成（封印状态）

显示黑色封印效果：
- 🔒 **锁头图标**（晃动动画）
- **旋转的锁链装饰**
- **"技能卡尚未生成"** 提示
- **"生成技能卡"** 按钮（金色，待实现AI生成功能）

#### 情况 B：技能卡已生成

显示技能卡信息：
- **属性类型**小徽章
- **技能名称**（金色渐变文字）
- **技能效果**（紫色渐变背景）
- **技能描述**（白色背景，详细说明）

---

## 🧪 测试技能卡显示

由于技能卡 AI 生成功能尚未完全实现，你可以**手动添加测试数据**来查看效果：

### 在浏览器控制台执行：

```javascript
// 为某张卡添加测试技能卡数据
const skillData = {
  name: "闪耀星芒",
  effect: "Vocal +25%, Dance +15%",
  description: "激发偶像的内在潜能，在舞台上绽放出最耀眼的光芒。持续3回合，冷却时间5回合。"
};

// 替换为你想测试的卡面全名（例如：【誘惑ハートビート】黛冬優子）
const cardName = "【誘惑ハートビート】黛冬優子";

localStorage.setItem(`skill_${cardName}`, JSON.stringify(skillData));

// 刷新页面即可看到效果
location.reload();
```

### 测试其他卡片：

只需要修改 `cardName` 变量为其他卡片的全名即可。

### 清除测试数据：

```javascript
// 清除单张卡的技能卡
localStorage.removeItem(`skill_${cardName}`);

// 或清除所有技能卡数据
Object.keys(localStorage).forEach(key => {
  if (key.startsWith('skill_')) {
    localStorage.removeItem(key);
  }
});

location.reload();
```

---

## 🎨 动画效果

### 觉醒按钮动画：

- ✨ 金色脉冲动画（觉醒状态）
- 🔄 悬停时旋转 180°
- 📏 悬停时缩放 1.1 倍

### 封印效果动画：

- 🔒 锁头左右晃动（-5° ↔ +5°）
- 🔗 锁链水平移动旋转

### 技能卡滑入动画：

- 📥 从下方滑入 + 淡入效果
- ⏱️ 持续 0.5 秒

---

## 🌐 全屏查看

点击左侧卡面可以**全屏查看高清大图**，全屏查看时也会**自动同步觉醒状态**：

- 觉醒模式下全屏 → 显示觉醒后卡面
- 未觉醒模式下全屏 → 显示未觉醒卡面

---

## 🔧 技术实现

### 数据结构：

```typescript
interface DisplayCard {
  // ... 基础字段
  awakenedImageUrl?: string; // 觉醒后卡面URL
  skill?: {
    name: string;        // 技能名称
    description: string; // 技能描述
    effect: string;      // 技能效果
  } | null; // null = 未生成
}
```

### 数据持久化：

- 技能卡数据存储在 `localStorage`
- Key 格式: `skill_${卡面全名}`
- Value: JSON 字符串

### 图片资源：

- 未觉醒卡面：`{theme} {character}.webp`
- 觉醒卡面：`{theme} {character}+.webp`

---

## 📝 待完成功能

- [ ] **技能卡 AI 生成**（点击"生成技能卡"按钮）
- [ ] 技能卡重新生成功能
- [ ] 技能卡编辑器
- [ ] 与 SillyTavern AI API 集成

---

## 🎉 使用建议

1. **先测试封印效果**：进入觉醒模式，查看未生成技能卡的封印动画
2. **添加测试数据**：使用上面的代码添加一张卡的技能卡
3. **查看技能卡显示**：切换到觉醒模式，欣赏技能卡的精美布局
4. **测试全屏查看**：点击卡面，体验全屏查看功能

---

**Enjoy! ✨**



